window.hangsper=window.hs={keyPress:function(e,t){13===e.keyCode&&(e.preventDefault(),t(this))},init:function(){},getId:function(e){return document.getElementById(e)},getClassName:function(e,t){return null==t?document.getElementsByClassName(e):e.getElementsByClassName(t)},getTagName:function(e,t){return null==t?document.getElementsByTagName(e):e.getElementsByTagName(t)},getCurrentTime:function(){var e=new Date,t=[];return t.push(e.getFullYear()),t.push(e.getMonth()+1),t.push(e.getDate()),t.push(e.getHours()),t.push(e.getMinutes()),t.push(e.getSeconds()),t.push(e.getDay()),t.push(e.getTime()),t},isEmpty:function(e){return""==e||null==e||null==e},ajax:function(e){var t=null;if((e=e||{}).url){if(e.type=e.type||"get",e.time=e.time||10,e.data=e.data||{},window.XMLHttpRequest)var n=new XMLHttpRequest;else n=new ActiveXObject("Microsoft.XMLHTTP");switch(e.type.toLowerCase()){case"get":n.open("GET",e.url+function(e){var t=[];for(var n in e)t.push("/"+e[n]);return t.join("")}(e.data),!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send();break;case"post":n.open("POST",e.url,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(function(e){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")}(e.data))}n.onreadystatechange=function(){4==n.readyState&&(200<=n.status&&n.status<300||304==n.status?(clearTimeout(t),e.succFn&&e.succFn(n.responseText)):(clearTimeout(t),e.errFn&&e.errFn(n.status)))},t=setTimeout(function(){alert("连接超时 请稍后再试"),n.onreadystatechange=null},1e3*e.time)}else alert("Please check your Url")},getAjax:function(e){hs.ajax({url:e.url,data:e.data,succFn:e.succFn,type:"get"})},postAjax:function(e){hs.ajax({url:e.url,data:e.data,succFn:e.succFn,type:"post"})},redirect:function(e){return window.location.href=e},text:function(e,t){e.innerHTML=t},addText:function(e,t){e.innerHTML+=t},click:function(e,t){e.addEventListener("click",function(){t(this)})},toast:function(e,t,n){var a="#00cc33",i="#ff0000",l=document.createElement("div");hs.text(l,n),l.setAttribute("id","toast"),document.body.appendChild(l),"green"==e?l.style.background=a:"red"==e&&(l.style.background=i),l.className="show",setTimeout(function(){l.className=l.className.replace("show",""),hs.removeEle(l)},1e3*t)},removeEle:function(e){return e.parentNode.removeChild(e)},randomColor:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)},randomNum:function(e,t){return Math.floor(e+Math.random()*(t-e))},calandar:function(e,t,n){createCalendar(new Calendar(t,n),e)},pageLoader:function(e){var t=document.createElement("div");t.setAttribute("id","loader"),document.body.appendChild(t);var n=hs.getTagName(e)[0],a=n.parentNode,i=document.createElement("div");i.setAttribute("id","respones"),i.setAttribute("class","animate-bottom"),a.replaceChild(i,n),i.appendChild(n)},loading:function(){hs.getId("loader").style.display="block",hs.getId("respones").style.display="none",setTimeout(function(){hs.getId("loader").style.display="none",hs.getId("respones").style.display="block"},500)},sqlToJsDate:function(e){var t=e.split("-"),n=t[0],a=(Number(t[1])-1).toString(),i=t[2].split("T"),l=Number(i[0]).toString();return new Date(n,a,l)},uploadFile:function(e,t,n){var a=new XMLHttpRequest,i=new FormData;i.append("file",e),a.onload=function(){4==a.readyState&&(200<=a.status&&a.status<300||304==a.status?n(a.responseText):hs.toast("red",2,"error code: "+a.status))},a.open("post",t,!0),a.send(i)}};var Calendar=function(e,t,n){for(var a in this.Options={Color:"",LinkColor:"",NavShow:!0,NavVertical:!1,NavLocation:"",DateTimeShow:!0,DateTimeFormat:"mmm, yyyy",DatetimeLocation:"",EventClick:"",EventTargetWholeDay:!1,DisabledDays:[],ModelChange:e},t)this.Options[a]="string"==typeof t[a]?t[a].toLowerCase():t[a];this.Model=e||{},this.Today=new Date,this.Selected=this.Today,this.Today.Month=this.Today.getMonth(),this.Today.Year=this.Today.getFullYear(),n&&(this.Selected=n),this.Selected.Month=this.Selected.getMonth(),this.Selected.Year=this.Selected.getFullYear(),this.Selected.Days=new Date(this.Selected.Year,this.Selected.Month+1,0).getDate(),this.Selected.FirstDay=new Date(this.Selected.Year,this.Selected.Month,1).getDay(),this.Selected.LastDay=new Date(this.Selected.Year,this.Selected.Month+1,0).getDay(),this.Prev=new Date(this.Selected.Year,this.Selected.Month-1,1),0==this.Selected.Month&&(this.Prev=new Date(this.Selected.Year-1,11,1)),this.Prev.Days=new Date(this.Prev.getFullYear(),this.Prev.getMonth()+1,0).getDate()};function createCalendar(m,o,e){if(void 0!==e){var t=new Date(m.Selected.Year,m.Selected.Month+e,1);m=new Calendar(m.Model,m.Options,t),o.innerHTML=""}else for(var n in m.Options)"function"!=typeof m.Options[n]&&"object"!=typeof m.Options[n]&&m.Options[n]&&(o.className+=" "+n+"-"+m.Options[n]);var s=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"];var v=document.createElement("div");v.className+="cld-main",m.Options.Color&&(v.innerHTML+="<style>.cld-main{color:"+m.Options.Color+";}</style>"),m.Options.LinkColor&&(v.innerHTML+="<style>.cld-title a{color:"+m.Options.LinkColor+";}</style>"),o.appendChild(v),m.Options.NavShow&&m.Options.NavVertical&&function(){var e=document.createElement("div");e.className+="cld-sidebar";var t=document.createElement("ul");t.className+="cld-monthList";for(var n=0;n<s.length-3;n++){var a=document.createElement("li");a.className+="cld-month";var i=n-(4-m.Selected.Month);if(i<0?i+=12:11<i&&(i-=12),0==n)a.className+=" cld-rwd cld-nav",a.addEventListener("click",function(){"function"==typeof m.Options.ModelChange?m.Model=m.Options.ModelChange():m.Model=m.Options.ModelChange,createCalendar(m,o,-1)}),a.innerHTML+='<svg height="15" width="15" viewBox="0 0 100 75" fill="rgba(255,255,255,0.5)"><polyline points="0,75 100,75 50,0"></polyline></svg>';else if(n==s.length-4)a.className+=" cld-fwd cld-nav",a.addEventListener("click",function(){"function"==typeof m.Options.ModelChange?m.Model=m.Options.ModelChange():m.Model=m.Options.ModelChange,createCalendar(m,o,1)}),a.innerHTML+='<svg height="15" width="15" viewBox="0 0 100 75" fill="rgba(255,255,255,0.5)"><polyline points="0,0 100,0 50,75"></polyline></svg>';else if(a.className+=n<4?" cld-pre":4<n?" cld-post":" cld-curr",function(){var e=n-4;a.addEventListener("click",function(){"function"==typeof m.Options.ModelChange?m.Model=m.Options.ModelChange():m.Model=m.Options.ModelChange,createCalendar(m,o,e)}),a.setAttribute("style","opacity:"+(1-Math.abs(e)/4)),a.innerHTML+=s[i].substr(0,3)}(),0==i){var l=document.createElement("li");l.className+="cld-year",l.innerHTML+=n<5?m.Selected.Year:m.Selected.Year+1,t.appendChild(l)}t.appendChild(a)}e.appendChild(t),m.Options.NavLocation?(document.getElementById(m.Options.NavLocation).innerHTML="",document.getElementById(m.Options.NavLocation).appendChild(e)):o.appendChild(e)}(),m.Options.DateTimeShow&&function(){var e=document.createElement("div");if(e.className+="cld-datetime",m.Options.NavShow&&!m.Options.NavVertical){var t=document.createElement("div");t.className+=" cld-rwd cld-nav",t.addEventListener("click",function(){createCalendar(m,o,-1)}),t.innerHTML='<svg height="15" width="15" viewBox="0 0 75 100" fill="rgba(0,0,0,0.5)"><polyline points="0,50 75,0 75,100"></polyline></svg>',e.appendChild(t)}var n=document.createElement("div");if(n.className+=" today",n.innerHTML=s[m.Selected.Month]+", "+m.Selected.Year,e.appendChild(n),m.Options.NavShow&&!m.Options.NavVertical){var a=document.createElement("div");a.className+=" cld-fwd cld-nav",a.addEventListener("click",function(){createCalendar(m,o,1)}),a.innerHTML='<svg height="15" width="15" viewBox="0 0 75 100" fill="rgba(0,0,0,0.5)"><polyline points="0,0 75,50 0,100"></polyline></svg>',e.appendChild(a)}m.Options.DatetimeLocation?(document.getElementById(m.Options.DatetimeLocation).innerHTML="",document.getElementById(m.Options.DatetimeLocation).appendChild(e)):v.appendChild(e)}(),function(){var e=document.createElement("ul");e.className="cld-labels";for(var t=["周日","周一","周二","周三","周四","周五","周六"],n=0;n<t.length;n++){var a=document.createElement("li");a.className+="cld-label",a.innerHTML=t[n],e.appendChild(a)}v.appendChild(e)}(),function(){function e(e){var t=document.createElement("p");return t.className+="cld-number",t.innerHTML+=e,t}var t=document.createElement("ul");t.className+="cld-days";for(var n=0;n<m.Selected.FirstDay;n++){(h=document.createElement("li")).className+="cld-day prevMonth";for(var a=n%7,i=0;i<m.Options.DisabledDays.length;i++)a==m.Options.DisabledDays[i]&&(h.className+=" disableDay");var l=e(m.Prev.Days-m.Selected.FirstDay+(n+1));h.appendChild(l),t.appendChild(h)}for(n=0;n<m.Selected.Days;n++){for((h=document.createElement("li")).className+="cld-day currMonth",a=(n+m.Selected.FirstDay)%7,i=0;i<m.Options.DisabledDays.length;i++)a==m.Options.DisabledDays[i]&&(h.className+=" disableDay");l=e(n+1);for(var o=0;o<m.Model.length;o++){var s=hs.sqlToJsDate(m.Model[o].Date),d=new Date(m.Selected.Year,m.Selected.Month,n+1);if(s.getTime()==d.getTime()){l.className+=" eventday";var c=document.createElement("span");if(c.className+="cld-title","function"==typeof m.Model[o].Link||m.Options.EventClick){var r=document.createElement("a");if(r.setAttribute("href","#"),r.innerHTML+=m.Model[o].Title,m.Options.EventClick){var p=m.Model[o].Link;"string"!=typeof m.Model[o].Link?(r.addEventListener("click",m.Options.EventClick.bind.apply(m.Options.EventClick,[null].concat(p))),m.Options.EventTargetWholeDay&&(h.className+=" clickable",h.addEventListener("click",m.Options.EventClick.bind.apply(m.Options.EventClick,[null].concat(p))))):(r.addEventListener("click",m.Options.EventClick.bind(null,p)),m.Options.EventTargetWholeDay&&(h.className+=" clickable",h.addEventListener("click",m.Options.EventClick.bind(null,p))))}else r.addEventListener("click",m.Model[o].Link),m.Options.EventTargetWholeDay&&(h.className+=" clickable",h.addEventListener("click",m.Model[o].Link));c.appendChild(r)}else c.innerHTML+='<div id = "'+m.Model[o].Link+'" class="dateEvent" onclick="showDetail(this);">'+m.Model[o].Title+"</div>";l.appendChild(c)}}h.appendChild(l),n+1==m.Today.getDate()&&m.Selected.Month==m.Today.Month&&m.Selected.Year==m.Today.Year&&(h.className+=" today"),t.appendChild(h)}var u=13;for(35<t.children.length?u=6:t.children.length<29&&(u=20),n=0;n<u-m.Selected.LastDay;n++){var h;for((h=document.createElement("li")).className+="cld-day nextMonth",a=(n+m.Selected.LastDay+1)%7,i=0;i<m.Options.DisabledDays.length;i++)a==m.Options.DisabledDays[i]&&(h.className+=" disableDay");l=e(n+1),h.appendChild(l),t.appendChild(h)}v.appendChild(t)}()}